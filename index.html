<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Athena Xie - Interactive Portfolio</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Space Grotesk', sans-serif;
            background-color: #0f172a;
            color: #fff;
            /* Grid Background Pattern */
            background-image: 
                linear-gradient(rgba(30, 41, 59, 0.5) 1px, transparent 1px),
                linear-gradient(90deg, rgba(30, 41, 59, 0.5) 1px, transparent 1px);
            background-size: 40px 40px;
        }
        #canvas-container {
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            /* Vignette effect */
            background: radial-gradient(circle at center, transparent 0%, #0f172a 100%);
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .modal.active {
            display: flex;
            opacity: 1;
        }
        .modal-content {
            background: #1e293b;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid #334155;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal.active .modal-content {
            transform: scale(1);
        }
        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        .close-btn:hover {
            color: #fff;
        }
        .instruction {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            color: #94a3b8;
            pointer-events: none;
            text-align: center;
            font-size: 0.9rem;
            letter-spacing: 1px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        /* Custom scrollbar for modals */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }
        .modal-content::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        .modal-content::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }
        .modal-content::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }
    </style>
</head>
<body>

    <div id="background-text" class="absolute top-[35%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none z-0 w-full px-4 select-none">
        <h1 id="line1" class="text-4xl md:text-5xl font-bold text-slate-600 mb-2 min-h-[1.5em]"></h1>
        <h2 id="line2" class="text-5xl md:text-7xl font-extrabold text-slate-200 mb-4 min-h-[1.2em] tracking-tight drop-shadow-lg"></h2>
        <p id="line3" class="text-sm md:text-lg text-slate-400 font-medium min-h-[1.5em] max-w-2xl mx-auto tracking-wide"></p>
    </div>

    <div id="canvas-container"></div>
    
    <div class="instruction">
        DRAG & THROW BLOCKS ‚Ä¢ CLICK TO OPEN
    </div>

    <div class="fixed top-4 right-4 z-50 flex gap-3">
        <button id="gravity-toggle" class="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg border border-slate-600 font-medium transition-all flex items-center gap-2 shadow-lg">
            <span class="text-lg">üåç</span>
            <span id="gravity-text">Gravity: ON</span>
        </button>
        <button id="reset-btn" class="px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-medium transition-all flex items-center gap-2 shadow-lg">
            <span class="text-lg">üîÑ</span>
            <span>Reset</span>
        </button>
    </div>

    <div id="modal-projects" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2 class="text-3xl font-bold mb-4 text-cyan-400">My Projects</h2>
            <div class="space-y-4">
                
                <a href="https://bullcitywoodshop.org" target="_blank" rel="noopener noreferrer" class="block p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition group cursor-pointer">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-cyan-400 group-hover:text-cyan-300">ü™µ The Bullcity Wood Shop</h3>
                        <span class="text-slate-400 group-hover:text-cyan-400 transition">‚Üó</span>
                    </div>
                    <p class="text-slate-500 text-sm mt-1">November 2025 - Current</p>
                    <p class="text-slate-400 mt-2">Created the volunteer information digital database, digitalized the attendance of students and volunteers, automated workflows, cleaned data, established a framework, and improved grants with data visualization using Airtable, JavaScript, and Python.</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <span class="px-2 py-1 bg-cyan-400/10 text-cyan-400 text-xs rounded-full">Airtable</span>
                        <span class="px-2 py-1 bg-yellow-400/10 text-yellow-400 text-xs rounded-full">JavaScript</span>
                        <span class="px-2 py-1 bg-blue-400/10 text-blue-400 text-xs rounded-full">Python</span>
                        <span class="px-2 py-1 bg-green-400/10 text-green-400 text-xs rounded-full">Data Visualization</span>
                        <span class="px-2 py-1 bg-orange-400/10 text-orange-400 text-xs rounded-full">NumPy</span>
                        <span class="px-2 py-1 bg-pink-400/10 text-pink-400 text-xs rounded-full">Volunteer</span>
                        <span class="px-2 py-1 bg-purple-400/10 text-purple-400 text-xs rounded-full">NPO</span>
                        <span class="px-2 py-1 bg-indigo-400/10 text-indigo-400 text-xs rounded-full">Internal Tool Design</span>
                        <span class="px-2 py-1 bg-teal-400/10 text-teal-400 text-xs rounded-full">API Integration</span>
                    </div>
                </a>

                <a href="https://asterism3.github.io/Poop-Master" target="_blank" rel="noopener noreferrer" class="block p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition group cursor-pointer">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-cyan-400 group-hover:text-cyan-300">üí© Poop Master</h3>
                        <span class="text-slate-400 group-hover:text-cyan-400 transition">‚Üó</span>
                    </div>
                    <p class="text-slate-500 text-sm mt-1">January 2026</p>
                    <p class="text-slate-400 mt-2">A poop tracker app. Yes, you read that right. Track your digestive health with style!</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <span class="px-2 py-1 bg-emerald-400/10 text-emerald-400 text-xs rounded-full">Full-Stack Development</span>
                        <span class="px-2 py-1 bg-rose-400/10 text-rose-400 text-xs rounded-full">Mobile/Web App</span>
                        <span class="px-2 py-1 bg-purple-400/10 text-purple-400 text-xs rounded-full">Open Source</span>
                        <span class="px-2 py-1 bg-cyan-400/10 text-cyan-400 text-xs rounded-full">Real-time Database</span>
                        <span class="px-2 py-1 bg-teal-400/10 text-teal-400 text-xs rounded-full">Tailwind CSS</span>
                        <span class="px-2 py-1 bg-yellow-400/10 text-yellow-400 text-xs rounded-full">JavaScript</span>
                        <span class="px-2 py-1 bg-orange-400/10 text-orange-400 text-xs rounded-full">HTML</span>
                    </div>
                    <span class="text-cyan-400/70 text-sm mt-2 inline-block">asterism3.github.io/Poop-Master</span>
                </a>
                
                <a href="#" class="block p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition group cursor-pointer">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-cyan-400 group-hover:text-cyan-300">üìä Obsidian Heatmap Tracker Plugin</h3>
                        <span class="text-slate-400 group-hover:text-cyan-400 transition">‚Üó</span>
                    </div>
                    <p class="text-slate-500 text-sm mt-1">December 2025</p>
                    <p class="text-slate-400 mt-2">Contributed new features and bug fixes (pull requests) for a popular Obsidian plugin used by over 10,000 people worldwide.</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <span class="px-2 py-1 bg-purple-400/10 text-purple-400 text-xs rounded-full">Open Source</span>
                        <span class="px-2 py-1 bg-yellow-400/10 text-yellow-400 text-xs rounded-full">JavaScript</span>
                        <span class="px-2 py-1 bg-pink-400/10 text-pink-400 text-xs rounded-full">10K+ Users</span>
                    </div>
                </a>
                
                <div class="block p-4 bg-slate-800 rounded-lg group">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-cyan-400">ü§ñ FTC Robotics Team #3587</h3>
                    </div>
                    <p class="text-slate-500 text-sm mt-1">September 2025 - Current</p>
                    <p class="text-slate-400 mt-2">Programmer for competitive FIRST Tech Challenge robotics team. Developed autonomous navigation, sensor integration, and teleop control systems.</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <span class="px-2 py-1 bg-orange-400/10 text-orange-400 text-xs rounded-full">Java</span>
                        <span class="px-2 py-1 bg-green-400/10 text-green-400 text-xs rounded-full">OpenCV</span>
                        <span class="px-2 py-1 bg-cyan-400/10 text-cyan-400 text-xs rounded-full">Autonomous</span>
                        <span class="px-2 py-1 bg-pink-400/10 text-pink-400 text-xs rounded-full">Android Studio</span>
                    </div>
                </div>
                
                <div class="block p-4 bg-slate-800 rounded-lg group">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-cyan-400">ü§ñ FTC Robotics Team #5459</h3>
                    </div>
                    <p class="text-slate-500 text-sm mt-1">September 2024 - May 2025</p>
                    <p class="text-slate-400 mt-2">Programmer building control systems and game strategy algorithms for competition robot. Implemented PID controllers and path planning.</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <span class="px-2 py-1 bg-orange-400/10 text-orange-400 text-xs rounded-full">Java</span>
                        <span class="px-2 py-1 bg-blue-400/10 text-blue-400 text-xs rounded-full">TeleOp</span>
                        <span class="px-2 py-1 bg-purple-400/10 text-purple-400 text-xs rounded-full">PID Control</span>
                        <span class="px-2 py-1 bg-yellow-400/10 text-yellow-400 text-xs rounded-full">Sensors</span>
                    </div>
                </div>
                
                <div class="block p-4 bg-slate-800 rounded-lg group">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-cyan-400">üêï UniTree Go2 Testing</h3>
                    </div>
                    <p class="text-slate-500 text-sm mt-1">August 2025</p>
                    <p class="text-slate-400 mt-2">Worked with a robotics team to test and refine the Go2's field-mapping workflow. Helped evaluate LiDAR-based SLAM performance, troubleshoot mapping artifacts, and document test results for iterative improvements.</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <span class="px-2 py-1 bg-green-400/10 text-green-400 text-xs rounded-full">LiDAR</span>
                        <span class="px-2 py-1 bg-blue-400/10 text-blue-400 text-xs rounded-full">SLAM</span>
                        <span class="px-2 py-1 bg-purple-400/10 text-purple-400 text-xs rounded-full">Robotics</span>
                        <span class="px-2 py-1 bg-cyan-400/10 text-cyan-400 text-xs rounded-full">Field Mapping</span>
                        <span class="px-2 py-1 bg-yellow-400/10 text-yellow-400 text-xs rounded-full">Testing & QA</span>
                    </div>
                </div>
                
                <div class="block p-4 bg-slate-800 rounded-lg group">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-bold text-cyan-400">üíä Medicine Detection System</h3>
                    </div>
                    <p class="text-slate-500 text-sm mt-1">In Progress</p>
                    <p class="text-slate-400 mt-2">Building a computer vision system to detect and identify medications and supplements for grandparents, helping ensure they take the right pills at the right time.</p>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <span class="px-2 py-1 bg-red-400/10 text-red-400 text-xs rounded-full">YOLO v11</span>
                        <span class="px-2 py-1 bg-blue-400/10 text-blue-400 text-xs rounded-full">Python</span>
                        <span class="px-2 py-1 bg-green-400/10 text-green-400 text-xs rounded-full">Computer Vision</span>
                        <span class="px-2 py-1 bg-pink-400/10 text-pink-400 text-xs rounded-full">Healthcare</span>
                        <span class="px-2 py-1 bg-purple-400/10 text-purple-400 text-xs rounded-full">Object Detection</span>
                    </div>
                </div>
                
            </div>
        </div>
    </div>

    <div id="modal-art" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2 class="text-3xl font-bold mb-4 text-pink-400">My Art</h2>
            <div class="text-center py-8">
                <div class="text-6xl mb-6">üé®</div>
                <p class="text-xl text-slate-300 leading-relaxed mb-4">
                    I have been a drawer for as long as I can remember... since I have memories.
                </p>
                <div class="inline-flex items-center gap-2 px-4 py-2 bg-pink-400/20 text-pink-400 rounded-full">
                    <span class="text-lg">üöß</span>
                    <span class="font-medium">This page is currently under construction</span>
                    <span class="text-lg">üöß</span>
                </div>
                <p class="text-slate-500 mt-6 text-sm">Check back soon for my artwork gallery!</p>
            </div>
        </div>
    </div>

    <div id="modal-blogs" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2 class="text-3xl font-bold mb-4 text-yellow-400">Blogs</h2>
            <article id="blog-babysitting" class="mb-6 border-b border-slate-700 pb-4 cursor-pointer hover:bg-slate-800/50 rounded-lg p-4 -m-4 transition-all">
                <div class="flex items-center gap-2 mb-2">
                    <span class="px-2 py-1 bg-yellow-400/20 text-yellow-400 text-xs rounded-full">blog</span>
                </div>
                <h3 class="text-xl font-bold mb-2 group-hover:text-yellow-400">Babysitting</h3>
                <p class="text-slate-400 text-sm mb-2">November 6, 2025</p>
                <p class="text-slate-300 line-clamp-2">I used to be a terrible babysitter. Then I realized it wasn't about the kids...</p>
                <span class="text-yellow-400 text-sm mt-2 inline-block">Click to read more ‚Üí</span>
            </article>
        </div>
    </div>

    <div id="modal-blog-babysitting" class="modal">
        <div class="modal-content max-w-2xl">
            <button class="close-btn">&times;</button>
            <div class="flex items-center gap-2 mb-4">
                <span class="px-2 py-1 bg-yellow-400/20 text-yellow-400 text-xs rounded-full">blog</span>
                <span class="text-slate-400 text-sm">November 6, 2025</span>
            </div>
            <h2 class="text-3xl font-bold mb-6 text-yellow-400">Babysitting</h2>
            <div class="prose prose-invert max-w-none space-y-4 text-slate-300 leading-relaxed">
                <p class="text-xl text-slate-200 font-medium italic">I used to be a terrible babysitter. Then I realized it wasn't about the kids.</p>
                
                <p>When I babysit, I never know what to do. I give the kids an iPad, a few candies, and pray for peace. But when they cry, no gadget can save me‚Äîjust that panicky feeling of "I have no idea what to do."</p>
                
                <p>I used to think babysitting was about entertainment. Now I realize it's about control, the kind that calms rather than commands. When kids cry, they aren't always sad; they're scared. They're looking for a grown-up who has things under control. If you panic too, the balance collapses. You become an adult child, just as lost.</p>
                
                <p>Adulthood, it turns out, is the willingness to take responsibility for yourself and others. By helping kids do the hard thing when it's right, you're practicing your own self-control. Babysitting becomes less about keeping order and more about turning chaos into calm, discomfort into peace.</p>
                
                <p>What makes babysitting special is the power dynamic. Growing up, we either follow authority‚Äîparents, teachers, coaches‚Äîor share decisions with peers. But babysitting flips it. Suddenly you are the authority figure, and the kids expect certainty. When you give vague answers‚Äî"Maybe we'll play later?"‚Äîit doesn't feel like freedom to them; it feels like instability. They don't need options; they need clarity.</p>
                
                <p>And yet, kids aren't powerless. They have something adults often forget: <em>soft power</em>. Crying, whining, or simply looking adorable‚Äîthese are their diplomacy tools, emotional levers that bend the atmosphere. The trick isn't to fight it but to respond with grounded compassion.</p>
                
                <p>Each tantrum, each messy snack time, is a lesson in leadership: staying calm, giving direction, listening, adjusting‚Äîbeing the reliable presence someone can follow. Babysitting, in that sense, is a rehearsal for growing up.</p>
            </div>
            <button class="back-to-blogs mt-6 text-yellow-400 hover:text-yellow-300 transition flex items-center gap-2">
                ‚Üê Back to all blogs
            </button>
        </div>
    </div>

    <div id="modal-socials" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2 class="text-3xl font-bold mb-4 text-green-400">Social Media</h2>
            <div class="flex flex-col space-y-3">
                <a href="https://instagram.com/asterlitee" target="_blank" rel="noopener noreferrer" class="flex items-center justify-between p-4 bg-slate-800 rounded-lg hover:bg-gradient-to-r hover:from-[#833AB4] hover:via-[#E1306C] hover:to-[#F77737] hover:text-white transition group">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">üì∏</span>
                        <div>
                            <span class="font-bold block">Instagram</span>
                            <span class="text-slate-400 text-sm group-hover:text-white/80">@asterlitee</span>
                        </div>
                    </div>
                    <span class="text-slate-400 group-hover:text-white">‚Üó</span>
                </a>
                <a href="https://github.com/asterism3" target="_blank" rel="noopener noreferrer" class="flex items-center justify-between p-4 bg-slate-800 rounded-lg hover:bg-[#333] hover:text-white transition group">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">üíª</span>
                        <div>
                            <span class="font-bold block">GitHub</span>
                            <span class="text-slate-400 text-sm group-hover:text-white/80">@asterism3</span>
                        </div>
                    </div>
                    <span class="text-slate-400 group-hover:text-white">‚Üó</span>
                </a>
            </div>
        </div>
    </div>

    <div id="modal-funfact" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2 class="text-3xl font-bold mb-4 text-purple-400">Fun Facts About Me</h2>
            <div class="space-y-4">
                <div class="p-4 bg-slate-800 rounded-lg border-l-4 border-purple-400">
                    <span class="text-2xl mb-2 block">üçµ</span>
                    <p class="text-slate-300">I've been a matcha lover since 2016 ‚Äî that's almost a decade of green tea obsession!</p>
                </div>
                <div class="p-4 bg-slate-800 rounded-lg border-l-4 border-cyan-400">
                    <span class="text-2xl mb-2 block">üìö</span>
                    <p class="text-slate-300">I'm an avid reader and dreamer. Books are my portal to infinite worlds.</p>
                </div>
                <div class="p-4 bg-slate-800 rounded-lg border-l-4 border-pink-400">
                    <span class="text-2xl mb-2 block">üé®</span>
                    <p class="text-slate-300">I've been drawing since I could hold a pencil ‚Äî it's my oldest creative outlet.</p>
                </div>
                <div class="p-4 bg-slate-800 rounded-lg border-l-4 border-yellow-400">
                    <span class="text-2xl mb-2 block">üí°</span>
                    <p class="text-slate-300">I love building things that help people ‚Äî from databases to poop trackers!</p>
                </div>
                <div class="p-4 bg-slate-800 rounded-lg border-l-4 border-green-400">
                    <span class="text-2xl mb-2 block">üåü</span>
                    <p class="text-slate-300">I'm a high school senior studying in the US, chasing my dreams one project at a time.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Module aliases
        const Engine = Matter.Engine,
              Render = Matter.Render,
              Runner = Matter.Runner,
              Bodies = Matter.Bodies,
              Composite = Matter.Composite,
              MouseConstraint = Matter.MouseConstraint,
              Mouse = Matter.Mouse,
              Events = Matter.Events,
              Common = Matter.Common,
              Vector = Matter.Vector;

        // Create engine
        const engine = Engine.create();
        const world = engine.world;

        // Reduce gravity slightly for a floaty feel
        engine.gravity.y = 0.5;

        // Create renderer
        const container = document.getElementById('canvas-container');
        const render = Render.create({
            element: container,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                background: 'transparent',
                wireframes: false, // We want full shapes
                showAngleIndicator: false
            }
        });

        // Add resizing
        window.addEventListener('resize', () => {
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
            // Reposition walls (will implement logic to remove/re-add walls properly or update bounds)
            updateWalls();
        });

        // Define our interactive bodies (The Menu Items)
        const categories = [
            { id: 'projects', label: 'PROJECTS', color: '#22d3ee', x: 0.25, y: 0.25 },
            { id: 'art', label: 'MY ART', color: '#f472b6', x: 0.75, y: 0.25 },
            { id: 'blogs', label: 'BLOGS', color: '#facc15', x: 0.25, y: 0.55 },
            { id: 'socials', label: 'SOCIALS', color: '#4ade80', x: 0.5, y: 0.55 },
            { id: 'funfact', label: 'FUN FACT', color: '#a78bfa', x: 0.75, y: 0.55 }
        ];

        const bodies = [];
        
        categories.forEach(cat => {
            const x = window.innerWidth * cat.x;
            const y = window.innerHeight * cat.y;
            // Create a chamfered rectangle for a softer look
            const body = Bodies.rectangle(x, y, 160, 60, {
                chamfer: { radius: 10 },
                render: {
                    fillStyle: cat.color,
                    strokeStyle: '#fff',
                    lineWidth: 2
                },
                label: cat.id, // Used to identify click
                restitution: 0.9 // Bouncy
            });
            // Attach custom property for text rendering
            body.customLabel = cat.label;
            bodies.push(body);
        });

        // Add random shapes for fun/aesthetic
        const randomShapes = [];
        const themeColors = ['#22d3ee', '#f472b6', '#facc15', '#4ade80']; // Cyan, Pink, Yellow, Matcha Green

        for (let i = 0; i < 20; i++) {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight * 0.5; // Start top half
            const size = Math.random() * 25 + 10;
            
            // Mostly dark shapes, some colored ones for pop - all with 50% opacity
            const isColored = Math.random() > 0.7;
            const baseColor = isColored ? themeColors[Math.floor(Math.random() * themeColors.length)] : '#334155';
            // Convert hex to rgba with 50% opacity
            const hexToRgba = (hex, alpha) => {
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);
                return `rgba(${r}, ${g}, ${b}, ${alpha})`;
            };
            const color = hexToRgba(baseColor, 0.4);
            
            let shape;
            if (Math.random() > 0.5) {
                shape = Bodies.circle(x, y, size, {
                    render: { fillStyle: color },
                    restitution: 0.7,
                    frictionAir: 0.01
                });
            } else {
                shape = Bodies.polygon(x, y, Math.round(Math.random() * 5 + 3), size, {
                    render: { fillStyle: color },
                    restitution: 0.7,
                    frictionAir: 0.01
                });
            }
            randomShapes.push(shape);
        }

        // Walls
        let walls = [];
        function updateWalls() {
            Composite.remove(world, walls);
            const width = window.innerWidth;
            const height = window.innerHeight;
            const wallThickness = 60;
            
            walls = [
                Bodies.rectangle(width/2, -wallThickness/2, width, wallThickness, { isStatic: true, render: { visible: false } }), // Top
                Bodies.rectangle(width/2, height + wallThickness/2, width, wallThickness, { isStatic: true, render: { visible: false } }), // Bottom
                Bodies.rectangle(width + wallThickness/2, height/2, wallThickness, height, { isStatic: true, render: { visible: false } }), // Right
                Bodies.rectangle(-wallThickness/2, height/2, wallThickness, height, { isStatic: true, render: { visible: false } }) // Left
            ];
            Composite.add(world, walls);
        }

        // Add everything to world
        Composite.add(world, [...bodies, ...randomShapes]);
        updateWalls();

        // Add mouse control
        const mouse = Mouse.create(render.canvas);
        const mouseConstraint = MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: {
                    visible: false
                }
            }
        });

        Composite.add(world, mouseConstraint);

        // Keep the mouse in sync with rendering
        render.mouse = mouse;

        // "Curious" Mouse Interaction (Repulsion)
        Events.on(engine, 'beforeUpdate', function() {
            if (!mouse.position.x || !mouse.position.y) return;
            
            const allBodies = Composite.allBodies(world);
            const mousePos = mouse.position;
            
            allBodies.forEach(body => {
                if (body.isStatic) return;

                const dx = body.position.x - mousePos.x;
                const dy = body.position.y - mousePos.y;
                const distanceSq = dx * dx + dy * dy;
                
                // If mouse is close (within 150px) and not dragging
                if (distanceSq < 22500 && distanceSq > 100 && mouseConstraint.body !== body) {
                    const forceMagnitude = 0.00005 * body.mass;
                    
                    Matter.Body.applyForce(body, body.position, {
                        x: (dx / Math.sqrt(distanceSq)) * forceMagnitude,
                        y: (dy / Math.sqrt(distanceSq)) * forceMagnitude
                    });
                }
            });
        });
        
        // Initial Spin/Velocity for randomness
        bodies.forEach(body => {
            Matter.Body.setAngularVelocity(body, (Math.random() - 0.5) * 0.1);
            Matter.Body.setVelocity(body, { x: (Math.random() - 0.5) * 5, y: (Math.random() - 0.5) * 5 });
        });

        // Run the engine
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // Explosion Logic
        const explosions = [];

        function createExplosion(x, y, color) {
            for (let i = 0; i < 20; i++) {
                explosions.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 15, // Higher velocity
                    vy: (Math.random() - 0.5) * 15,
                    life: 1.0,
                    color: color,
                    size: Math.random() * 5 + 3
                });
            }
        }

        // Custom Rendering for Text and 3D Effect on Bodies
        Events.on(render, 'afterRender', function() {
            const ctx = render.context;
            
            // Draw Explosions
            for (let i = explosions.length - 1; i >= 0; i--) {
                const p = explosions[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life -= 0.03; // Fade out speed
                
                if (p.life <= 0) {
                    explosions.splice(i, 1);
                    continue;
                }
                
                ctx.globalAlpha = p.life;
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1.0;
            }

            // We iterate over all bodies in the world to ensure we catch everything if needed, 
            // but for custom labels we only care about the menu items.
            // Using the specific 'bodies' array we created earlier is safer for this loop.
            
            bodies.forEach(body => {
                if (!body.customLabel) return;

                const { x, y } = body.position;
                const angle = body.angle;
                const width = 160; 
                const height = 60;
                
                ctx.translate(x, y);
                ctx.rotate(angle);
                
                // 1. Draw Shadow/Glow
                ctx.shadowColor = body.render.fillStyle;
                ctx.shadowBlur = 15;
                ctx.shadowOffsetX = 0;
                ctx.shadowOffsetY = 0;

                // 2. Draw Border
                ctx.strokeStyle = 'rgba(255,255,255,0.9)';
                ctx.lineWidth = 3;
                ctx.strokeRect(-width/2, -height/2, width, height);
                
                // Reset shadow for text
                ctx.shadowBlur = 0;

                // 3. Draw Text
                ctx.fillStyle = '#0f172a'; // Dark text on bright background
                ctx.font = '800 18px "Space Grotesk"';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(body.customLabel, 0, 0);

                // 4. Shine Effect
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.beginPath();
                ctx.moveTo(-width/2 + 10, -height/2 + 5);
                ctx.lineTo(width/2 - 50, -height/2 + 5);
                ctx.lineTo(width/2 - 70, -height/2 + 20);
                ctx.lineTo(-width/2 + 30, -height/2 + 20);
                ctx.fill();

                ctx.rotate(-angle);
                ctx.translate(-x, -y);
            });

            // Draw names on random shapes if we want, or just leave them abstract
        });

        // Click Handling
        let isDragging = false;
        
        Events.on(mouseConstraint, 'startdrag', () => {
            isDragging = true;
        });

        Events.on(mouseConstraint, 'enddrag', () => {
            setTimeout(() => { isDragging = false; }, 50); // Small delay to prevent click firing after drag
        });

        Events.on(mouseConstraint, 'mousedown', function(event) {
            const mousePosition = event.mouse.position;
            const bodiesUnder = Matter.Query.point(bodies, mousePosition);
            
            if (bodiesUnder.length > 0 && !isDragging) {
                const clickedBody = bodiesUnder[0];
                const modalId = `modal-${clickedBody.label}`;
                openModal(modalId);
            }
        });

        // Prevent opening if it was a drag
        // Actually, 'mousedown' fires before drag. Let's use 'mouseup' and check if we dragged.
        // Re-implementing interaction logic for better UX:
        // If mouse down and mouse up happen on the same body with minimal movement, it's a click.
        
        let mouseDownPos = null;
        let clickedBodyLabel = null;

        Events.on(mouseConstraint, 'mousedown', (event) => {
            mouseDownPos = { ...event.mouse.position };
            const bodiesUnder = Matter.Query.point(bodies, mouseDownPos);
            if (bodiesUnder.length > 0) {
                clickedBodyLabel = bodiesUnder[0].label;
            } else {
                clickedBodyLabel = null;
            }
        });

        Events.on(mouseConstraint, 'mouseup', (event) => {
            if (!clickedBodyLabel) return;
            
            const mouseUpPos = event.mouse.position;
            const dist = Vector.magnitude(Vector.sub(mouseDownPos, mouseUpPos));
            
            // If moved less than 5 pixels, count as click
            if (dist < 5) {
                const body = bodies.find(b => b.label === clickedBodyLabel);
                if (body) {
                    createExplosion(mouseUpPos.x, mouseUpPos.y, body.render.fillStyle);
                }

                const modalId = `modal-${clickedBodyLabel}`;
                // Open modal immediately
                openModal(modalId);
            }
            clickedBodyLabel = null;
        });


        // Modal Logic
        function openModal(id) {
            const modal = document.getElementById(id);
            if (modal) {
                modal.classList.add('active');
                // Freeze physics engine (optional, maybe just pause it?)
                // runner.enabled = false; 
                // Or maybe just let it run in background! It's cooler.
            }
        }

        document.querySelectorAll('.close-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.target.closest('.modal').classList.remove('active');
                // runner.enabled = true;
            });
        });

        // Close on click outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Blog navigation - click to open full post
        document.getElementById('blog-babysitting').addEventListener('click', () => {
            document.getElementById('modal-blogs').classList.remove('active');
            setTimeout(() => {
                document.getElementById('modal-blog-babysitting').classList.add('active');
            }, 100);
        });

        // Back to blogs button
        document.querySelector('.back-to-blogs').addEventListener('click', () => {
            document.getElementById('modal-blog-babysitting').classList.remove('active');
            setTimeout(() => {
                document.getElementById('modal-blogs').classList.add('active');
            }, 100);
        });

        // Typing Animation
        const typingSequence = [
            { id: 'line1', text: "Heyo!", delay: 100 },
            { id: 'line2', text: "I'm Athena Xie", delay: 100 },
            { id: 'line3', text: "developer, matcha lover est.2016, dreamer, reader, high school senior studying in US", delay: 40 }
        ];

        // Inject styles for cursor
        const typeStyle = document.createElement('style');
        typeStyle.innerHTML = `
            .typing-cursor::after {
                content: '|';
                animation: blink 1s step-end infinite;
                color: #22d3ee;
                margin-left: 4px;
                vertical-align: baseline;
            }
            @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        `;
        document.head.appendChild(typeStyle);

        async function runTyping() {
            // Initial delay
            await new Promise(r => setTimeout(r, 800));

            for (const step of typingSequence) {
                const el = document.getElementById(step.id);
                if (!el) continue;
                
                el.classList.add('typing-cursor');
                
                for (let i = 0; i < step.text.length; i++) {
                    el.textContent = step.text.substring(0, i + 1);
                    // Add variance to typing speed for realism
                    const variance = Math.random() * 30 - 15;
                    await new Promise(r => setTimeout(r, step.delay + variance));
                }
                
                // Pause before next line
                await new Promise(r => setTimeout(r, 500));
                
                // Remove cursor from finished line (except maybe the last one? or just remove all)
                el.classList.remove('typing-cursor');
            }
            // Add static cursor to end of last line to show it's "live"
            const lastLine = document.getElementById('line3');
            if (lastLine) lastLine.classList.add('typing-cursor');
        }

        runTyping();

        // Gravity Toggle
        let gravityOn = true;
        const gravityToggle = document.getElementById('gravity-toggle');
        const gravityText = document.getElementById('gravity-text');

        gravityToggle.addEventListener('click', () => {
            gravityOn = !gravityOn;
            engine.gravity.y = gravityOn ? 0.5 : 0;
            
            if (gravityOn) {
                gravityText.textContent = 'Gravity: ON';
                gravityToggle.classList.remove('bg-pink-600', 'hover:bg-pink-500');
                gravityToggle.classList.add('bg-slate-800', 'hover:bg-slate-700');
            } else {
                gravityText.textContent = 'Gravity: OFF';
                gravityToggle.classList.remove('bg-slate-800', 'hover:bg-slate-700');
                gravityToggle.classList.add('bg-pink-600', 'hover:bg-pink-500');
            }
            
            // Give all bodies a little push when gravity turns off for fun effect
            if (!gravityOn) {
                const allBodies = Composite.allBodies(world);
                allBodies.forEach(body => {
                    if (!body.isStatic) {
                        Matter.Body.applyForce(body, body.position, {
                            x: (Math.random() - 0.5) * 0.01,
                            y: -0.02 * body.mass
                        });
                    }
                });
            }
        });

        // Reset Button
        const resetBtn = document.getElementById('reset-btn');
        
        resetBtn.addEventListener('click', () => {
            // Reset menu blocks to original positions
            categories.forEach((cat, index) => {
                const body = bodies[index];
                const x = window.innerWidth * cat.x;
                const y = window.innerHeight * cat.y;
                
                Matter.Body.setPosition(body, { x, y });
                Matter.Body.setVelocity(body, { x: 0, y: 0 });
                Matter.Body.setAngularVelocity(body, 0);
                Matter.Body.setAngle(body, 0);
            });
            
            // Reset random shapes to random top positions
            randomShapes.forEach(shape => {
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight * 0.3;
                
                Matter.Body.setPosition(shape, { x, y });
                Matter.Body.setVelocity(shape, { x: 0, y: 0 });
                Matter.Body.setAngularVelocity(shape, 0);
            });
            
            // Reset gravity to ON
            if (!gravityOn) {
                gravityOn = true;
                engine.gravity.y = 0.5;
                gravityText.textContent = 'Gravity: ON';
                gravityToggle.classList.remove('bg-pink-600', 'hover:bg-pink-500');
                gravityToggle.classList.add('bg-slate-800', 'hover:bg-slate-700');
            }
            
            // Create a fun explosion effect at center
            createExplosion(window.innerWidth / 2, window.innerHeight / 2, '#22d3ee');
        });

    </script>
</body>
</html>
